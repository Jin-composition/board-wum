{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\good\\\\Desktop\\\\\\uC544\\uCE74\\uC774\\uBE0C\\\\src\\\\pages\\\\List.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"../css/List.module.css\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router\";\nimport Pagination from \"./pagination/Pagination\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction List(_ref) {\n  _s();\n\n  let {\n    ip\n  } = _ref;\n  // const dataResponse = useQuery(\"getData\", getData);\n  console.log(ip, \"ip\");\n  const [posts, setPosts] = useState([]);\n  const itemsCounts = posts.length;\n  const [search, setSearch] = useState(\"\");\n  const navigate = useNavigate(); // 리스트 불러오기 //\n\n  useEffect(() => {\n    LoadList();\n  }, [search]);\n\n  async function LoadList() {\n    await axios.get(\"list\").then(res => {\n      setPosts(res.data);\n    });\n  }\n\n  console.log(posts); // search\n\n  function ChangeSearch(e) {\n    setSearch(e.target.value);\n  }\n\n  function OnSearch() {\n    if (search === null || search === \"\") {\n      alert(\"검색어 입력해주세요\");\n    } else {\n      const filterData = posts.filter(post => post.title.includes(search));\n      setPosts(filterData);\n      console.log(filterData, \"search-after\");\n    }\n  } // 삭제하기 //\n\n\n  function DeleteColumn(idx) {\n    console.log(idx);\n\n    if (window.confirm(\"정말로 삭제하시겠습니까?\")) {\n      axios.post(\"http://localhost:8000/delete\", {\n        board_idx: idx,\n        deleted: \"deleted\"\n      }).then(res => {\n        console.log(res);\n\n        if (res === \"error\") {\n          alert(\"에러\");\n        } else {\n          alert(\"삭제 완료\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n      LoadList();\n    }\n  }\n\n  function UpdateColumn(idx) {\n    navigate(`/update`, {\n      state: {\n        isEdit: true,\n        idx: idx\n      }\n    });\n  } // 페이지네이션\n\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const lastPage = Math.ceil(itemsCounts / pageSize);\n  const offset = (currentPage - 1) * pageSize;\n\n  function onPageChange(num) {\n    setCurrentPage(num);\n    console.log(num);\n  }\n\n  function prevPage(e) {\n    if (currentPage === 1) return;\n    setCurrentPage(prev => prev - 1);\n    console.log(currentPage, \"prev\");\n  }\n\n  function nextPage(e) {\n    if (currentPage >= lastPage) return;\n    setCurrentPage(prev => prev + 1);\n    console.log(currentPage, \"next\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.wrapper,\n    children: ip ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.page_name,\n        children: \"List \\uD398\\uC774\\uC9C0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.searchWrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: styles.search,\n          value: search,\n          onChange: ChangeSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.searchBtn,\n          onClick: OnSearch,\n          children: \"\\uAC80\\uC0C9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.board,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.board_row,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.number_h,\n            children: \"\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.title_h,\n            children: \"\\uC81C\\uBAA9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.date_h,\n            children: \"\\uC791\\uC131\\uC77C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.btns_h\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), posts.slice(offset, offset + pageSize).map((el, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.board_column,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.number,\n              children: el.rowNum\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.title,\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/detail/${el.board_idx}`,\n                style: {\n                  textDecoration: \"inherit\",\n                  color: \"inherit\"\n                },\n                children: el.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.date,\n              children: el.reg_rdate.slice(0, 10)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.btns,\n              children: el.ip_address === ip && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: styles.updateBtn,\n                  onClick: () => UpdateColumn(el.board_idx),\n                  children: \"\\uC218\\uC815\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: styles.deleteBtn,\n                  onClick: () => DeleteColumn(el.board_idx),\n                  children: \"\\uC0AD\\uC81C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)\n        }, el.board_idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        itemsCount: itemsCounts,\n        onPageChange: onPageChange,\n        pageSize: pageSize,\n        currentPage: currentPage,\n        setCurrentPage: setCurrentPage,\n        prevPage: prevPage,\n        nextPage: nextPage,\n        lastPage: lastPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.button,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/write\",\n          state: {\n            isEdit: false,\n            idx: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.write_btn,\n            style: {\n              textDecoration: \"none\"\n            },\n            children: \"\\uAE00 \\uC791\\uC131\\uD558\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(List, \"YEcPU3UnovlFJ0hquE7nZJ+Ntvc=\", false, function () {\n  return [useNavigate];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["C:/Users/good/Desktop/아카이브/src/pages/List.js"],"names":["React","useEffect","Link","styles","axios","useNavigate","Pagination","useState","List","ip","console","log","posts","setPosts","itemsCounts","length","search","setSearch","navigate","LoadList","get","then","res","data","ChangeSearch","e","target","value","OnSearch","alert","filterData","filter","post","title","includes","DeleteColumn","idx","window","confirm","board_idx","deleted","catch","err","UpdateColumn","state","isEdit","currentPage","setCurrentPage","pageSize","setPageSize","lastPage","Math","ceil","offset","onPageChange","num","prevPage","prev","nextPage","wrapper","page_name","searchWrapper","searchBtn","board","board_row","number_h","title_h","date_h","btns_h","slice","map","el","index","board_column","number","rowNum","textDecoration","color","date","reg_rdate","btns","ip_address","updateBtn","deleteBtn","button","write_btn"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"../css/List.module.css\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router\";\nimport Pagination from \"./pagination/Pagination\";\nimport { useState } from \"react\";\n\nfunction List({ ip }) {\n  // const dataResponse = useQuery(\"getData\", getData);\n  console.log(ip, \"ip\");\n  const [posts, setPosts] = useState([]);\n  const itemsCounts = posts.length;\n  const [search, setSearch] = useState(\"\");\n\n  const navigate = useNavigate();\n\n  // 리스트 불러오기 //\n  useEffect(() => {\n    LoadList();\n  }, [search]);\n\n  async function LoadList() {\n    await axios.get(\"list\").then((res) => {\n      setPosts(res.data);\n    });\n  }\n  console.log(posts);\n\n  // search\n\n  function ChangeSearch(e) {\n    setSearch(e.target.value);\n  }\n  function OnSearch() {\n    if (search === null || search === \"\") {\n      alert(\"검색어 입력해주세요\");\n    } else {\n      const filterData = posts.filter((post) => post.title.includes(search));\n      setPosts(filterData);\n      console.log(filterData, \"search-after\");\n    }\n  }\n\n  // 삭제하기 //\n  function DeleteColumn(idx) {\n    console.log(idx);\n    if (window.confirm(\"정말로 삭제하시겠습니까?\")) {\n      axios\n        .post(\"http://localhost:8000/delete\", {\n          board_idx: idx,\n          deleted: \"deleted\",\n        })\n        .then((res) => {\n          console.log(res);\n          if (res === \"error\") {\n            alert(\"에러\");\n          } else {\n            alert(\"삭제 완료\");\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      LoadList();\n    }\n  }\n  function UpdateColumn(idx) {\n    navigate(`/update`, { state: { isEdit: true, idx: idx } });\n  }\n  // 페이지네이션\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const lastPage = Math.ceil(itemsCounts / pageSize);\n  const offset = (currentPage - 1) * pageSize;\n\n  function onPageChange(num) {\n    setCurrentPage(num);\n    console.log(num);\n  }\n  function prevPage(e) {\n    if (currentPage === 1) return;\n    setCurrentPage((prev) => prev - 1);\n    console.log(currentPage, \"prev\");\n  }\n  function nextPage(e) {\n    if (currentPage >= lastPage) return;\n    setCurrentPage((prev) => prev + 1);\n    console.log(currentPage, \"next\");\n  }\n  return (\n    <div className={styles.wrapper}>\n      {ip ? (\n        <>\n          <div className={styles.page_name}>List 페이지</div>\n          <div className={styles.searchWrapper}>\n            <input\n              type=\"text\"\n              className={styles.search}\n              value={search}\n              onChange={ChangeSearch}\n            />\n            <button className={styles.searchBtn} onClick={OnSearch}>\n              검색\n            </button>\n          </div>\n          <div className={styles.board}>\n            <div className={styles.board_row}>\n              <div className={styles.number_h}>번호</div>\n              <div className={styles.title_h}>제목</div>\n              <div className={styles.date_h}>작성일</div>\n              <div className={styles.btns_h}></div>\n            </div>\n            {posts.slice(offset, offset + pageSize).map((el, index) => (\n              <div key={el.board_idx}>\n                <div className={styles.board_column}>\n                  <div className={styles.number}>{el.rowNum}</div>\n                  <div className={styles.title}>\n                    <Link\n                      to={`/detail/${el.board_idx}`}\n                      style={{\n                        textDecoration: \"inherit\",\n                        color: \"inherit\",\n                      }}\n                    >\n                      {el.title}\n                    </Link>\n                  </div>\n                  <div className={styles.date}>{el.reg_rdate.slice(0, 10)}</div>\n\n                  <div className={styles.btns}>\n                    {el.ip_address === ip && (\n                      <>\n                        <button\n                          className={styles.updateBtn}\n                          onClick={() => UpdateColumn(el.board_idx)}\n                        >\n                          수정\n                        </button>\n                        <button\n                          className={styles.deleteBtn}\n                          onClick={() => DeleteColumn(el.board_idx)}\n                        >\n                          삭제\n                        </button>\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n          <Pagination\n            itemsCount={itemsCounts}\n            onPageChange={onPageChange}\n            pageSize={pageSize}\n            currentPage={currentPage}\n            setCurrentPage={setCurrentPage}\n            prevPage={prevPage}\n            nextPage={nextPage}\n            lastPage={lastPage}\n          />\n          <div className={styles.button}>\n            <Link to={\"/write\"} state={{ isEdit: false, idx: 0 }}>\n              <button\n                className={styles.write_btn}\n                style={{ textDecoration: \"none\" }}\n              >\n                글 작성하기\n              </button>\n            </Link>\n          </div>\n        </>\n      ) : null}\n    </div>\n  );\n}\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}