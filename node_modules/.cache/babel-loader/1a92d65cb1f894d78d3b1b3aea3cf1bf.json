{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\good\\\\Desktop\\\\\\uC544\\uCE74\\uC774\\uBE0C\\\\src\\\\pages\\\\Write.js\",\n    _s = $RefreshSig$();\n\nimport { logDOM } from \"@testing-library/react\";\nimport axios from \"axios\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useLocation, useNavigate } from \"react-router\";\nimport styles from \"../css/Write.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Write(_ref) {\n  _s();\n\n  let {\n    ip\n  } = _ref;\n  console.log(ip);\n  let date = new Date();\n  let year = date.getFullYear();\n  let month = date.getMonth() + 1;\n  month = month < 10 ? \"0\" + month.toString() : month.toString();\n  let day = `0` + date.getDate();\n  const today = `${year}-${month}-${day}`;\n  const [title, setTitle] = useState(\"\");\n  const [comment, setComment] = useState(\"\");\n  const [edit, setEdit] = useState(false);\n  const navigate = useNavigate();\n  const {\n    state\n  } = useLocation(); // 파일 첨부하기\n\n  const fileRef = useRef();\n  const [myImages, setMyImages] = useState([]);\n  useEffect(() => {\n    if (state.isEdit === true) {\n      setEdit(true);\n      ForUpdate(state.idx);\n    } else {\n      setEdit(false);\n    }\n  }, [state]); // 수정페이지 data 불러오기 //\n\n  async function ForUpdate(idx) {\n    console.log(idx, \"번호\");\n    const param = new URLSearchParams();\n    param.append(\"board_idx\", idx);\n    await axios.post(\"http://localhost:8000/data\", param).then(res => {\n      console.log(res, \"결과_수정데이터\");\n      setTitle(res.data[0].title);\n      setComment(res.data[0].comment);\n    });\n  } // 수정하기 //\n\n\n  async function UpdateData() {\n    if (state) window.confirm(\"정말로 수정하시겠습니까?\");\n    {\n      const idx = state.idx;\n      await axios.post(\"http://localhost:8000/update\", {\n        title: title,\n        comment: comment,\n        update_date: today,\n        board_idx: idx\n      }).then(res => {\n        console.log(res, \"res\");\n        alert(\"수정 완료\");\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  function ChangeTitle(e) {\n    setTitle(e.target.value);\n  }\n\n  function ChangeComment(e) {\n    setComment(e.target.value);\n  }\n\n  function ChangeFile(e) {\n    const selectImage = e.target.files;\n    const ImageList = [...myImages];\n\n    for (let i = 0; i < ImageList.length; i++) {\n      const imageUrl = URL.createObjectURL(selectImage[i]);\n      ImageList.push(imageUrl);\n    }\n\n    setMyImages(ImageList); // if (!file) return;\n    // const fileReader = new FileReader();\n    // fileReader.readAsDataURL(file);\n    // console.log(file);\n    // fileReader.onLoad = (e) => {\n    //   console.log(e.target.result, \"url\");\n    //   setImageUrl(e.target.result);\n    //   console.log(imageUrl);\n    // };\n    // 왜 안되는지 모르겠네.....\n    // const imageUrl = URL.createObjectURL(file);\n    // console.log(imageUrl, \"??\");\n    // setImageUrl(imageUrl);\n  } // 저장하기 //\n\n\n  async function SaveData() {\n    const formData = new FormData(); // formData.append(\"files\", imageUrl);\n\n    if (window.confirm(\"정말로 작성하시겠습니까?\")) {\n      await axios.post(\"http://localhost:8000/write\", {\n        title: title,\n        comment: comment,\n        reg_rdate: today,\n        ip_address: ip,\n        data: formData\n      }).then(res => {\n        console.log(res, \"res\");\n        alert(\"등록완료\");\n      }).catch(err => {\n        console.log(err);\n      });\n      setTitle(\"\");\n      setComment(\"\");\n      navigate(\"/\");\n    }\n  }\n\n  function MoveToList() {\n    navigate(\"/\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.wrapper,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.page_name,\n      children: edit === true ? \"Update 페이지\" : \"Write 페이지\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.board,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.input_list,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.title_input,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: styles.label,\n            children: \"\\uC81C\\uBAA9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"title\",\n            className: styles.title,\n            value: title,\n            onChange: ChangeTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.comment_input,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: styles.label,\n            children: \"\\uB0B4\\uC6A9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"comment\",\n            className: styles.comment,\n            value: comment,\n            onChange: ChangeComment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.uploadFile,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: fileRef,\n            onChange: ChangeFile,\n            multiple: \"multiple\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), myImages.map(image => /*#__PURE__*/_jsxDEV(\"img\", {\n            // src={}\n            style: {\n              width: \"200px\",\n              height: \"200px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.button,\n        children: [edit === true ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.submit_btn,\n          onClick: UpdateData,\n          children: \"\\uC218\\uC815\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.submit_btn,\n          onClick: SaveData,\n          children: \"\\uC800\\uC7A5\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.list_btn,\n          onClick: MoveToList,\n          children: \"\\uBAA9\\uB85D\\uC73C\\uB85C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Write, \"QukqFrwEHfJNukC3iVJ64zpGxoM=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = Write;\nexport default Write;\n\nvar _c;\n\n$RefreshReg$(_c, \"Write\");","map":{"version":3,"sources":["C:/Users/good/Desktop/아카이브/src/pages/Write.js"],"names":["logDOM","axios","React","useEffect","useState","useRef","useLocation","useNavigate","styles","Write","ip","console","log","date","Date","year","getFullYear","month","getMonth","toString","day","getDate","today","title","setTitle","comment","setComment","edit","setEdit","navigate","state","fileRef","myImages","setMyImages","isEdit","ForUpdate","idx","param","URLSearchParams","append","post","then","res","data","UpdateData","window","confirm","update_date","board_idx","alert","catch","err","ChangeTitle","e","target","value","ChangeComment","ChangeFile","selectImage","files","ImageList","i","length","imageUrl","URL","createObjectURL","push","SaveData","formData","FormData","reg_rdate","ip_address","MoveToList","wrapper","page_name","board","input_list","title_input","label","comment_input","uploadFile","map","image","width","height","button","submit_btn","list_btn"],"mappings":"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","sourcesContent":["import { logDOM } from \"@testing-library/react\";\nimport axios from \"axios\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useLocation, useNavigate } from \"react-router\";\n\nimport styles from \"../css/Write.module.css\";\n\nfunction Write({ ip }) {\n  console.log(ip);\n  let date = new Date();\n  let year = date.getFullYear();\n  let month = date.getMonth() + 1;\n  month = month < 10 ? \"0\" + month.toString() : month.toString();\n  let day = `0` + date.getDate();\n  const today = `${year}-${month}-${day}`;\n\n  const [title, setTitle] = useState(\"\");\n  const [comment, setComment] = useState(\"\");\n\n  const [edit, setEdit] = useState(false);\n\n  const navigate = useNavigate();\n  const { state } = useLocation();\n\n  // 파일 첨부하기\n  const fileRef = useRef();\n  const [myImages, setMyImages] = useState([]);\n\n  useEffect(() => {\n    if (state.isEdit === true) {\n      setEdit(true);\n      ForUpdate(state.idx);\n    } else {\n      setEdit(false);\n    }\n  }, [state]);\n\n  // 수정페이지 data 불러오기 //\n  async function ForUpdate(idx) {\n    console.log(idx, \"번호\");\n    const param = new URLSearchParams();\n\n    param.append(\"board_idx\", idx);\n    await axios.post(\"http://localhost:8000/data\", param).then((res) => {\n      console.log(res, \"결과_수정데이터\");\n\n      setTitle(res.data[0].title);\n      setComment(res.data[0].comment);\n    });\n  }\n  // 수정하기 //\n  async function UpdateData() {\n    if (state) window.confirm(\"정말로 수정하시겠습니까?\");\n    {\n      const idx = state.idx;\n      await axios\n        .post(\"http://localhost:8000/update\", {\n          title: title,\n          comment: comment,\n          update_date: today,\n          board_idx: idx,\n        })\n        .then((res) => {\n          console.log(res, \"res\");\n\n          alert(\"수정 완료\");\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }\n\n  function ChangeTitle(e) {\n    setTitle(e.target.value);\n  }\n  function ChangeComment(e) {\n    setComment(e.target.value);\n  }\n  function ChangeFile(e) {\n    const selectImage = e.target.files;\n    const ImageList = [...myImages];\n\n    for (let i = 0; i < ImageList.length; i++) {\n      const imageUrl = URL.createObjectURL(selectImage[i]);\n      ImageList.push(imageUrl);\n    }\n    setMyImages(ImageList);\n\n    // if (!file) return;\n\n    // const fileReader = new FileReader();\n    // fileReader.readAsDataURL(file);\n    // console.log(file);\n\n    // fileReader.onLoad = (e) => {\n    //   console.log(e.target.result, \"url\");\n    //   setImageUrl(e.target.result);\n    //   console.log(imageUrl);\n    // };\n    // 왜 안되는지 모르겠네.....\n    // const imageUrl = URL.createObjectURL(file);\n    // console.log(imageUrl, \"??\");\n    // setImageUrl(imageUrl);\n  }\n\n  // 저장하기 //\n  async function SaveData() {\n    const formData = new FormData();\n    // formData.append(\"files\", imageUrl);\n    if (window.confirm(\"정말로 작성하시겠습니까?\")) {\n      await axios\n        .post(\"http://localhost:8000/write\", {\n          title: title,\n          comment: comment,\n          reg_rdate: today,\n          ip_address: ip,\n          data: formData,\n        })\n        .then((res) => {\n          console.log(res, \"res\");\n\n          alert(\"등록완료\");\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      setTitle(\"\");\n      setComment(\"\");\n      navigate(\"/\");\n    }\n  }\n\n  function MoveToList() {\n    navigate(\"/\");\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.page_name}>\n        {edit === true ? \"Update 페이지\" : \"Write 페이지\"}\n      </div>\n      <div className={styles.board}>\n        <div className={styles.input_list}>\n          <div className={styles.title_input}>\n            <label className={styles.label}>제목</label>\n            <input\n              id=\"title\"\n              className={styles.title}\n              value={title}\n              onChange={ChangeTitle}\n            ></input>\n          </div>\n          <div className={styles.comment_input}>\n            <label className={styles.label}>내용</label>\n            <textarea\n              id=\"comment\"\n              className={styles.comment}\n              value={comment}\n              onChange={ChangeComment}\n            ></textarea>\n          </div>\n          <div className={styles.uploadFile}>\n            <input\n              type=\"file\"\n              ref={fileRef}\n              onChange={ChangeFile}\n              multiple=\"multiple\"\n            />\n            {myImages.map((image) => (\n              <img\n                // src={}\n                style={{\n                  width: \"200px\",\n                  height: \"200px\",\n                }}\n              />\n            ))}\n          </div>\n        </div>\n        <div className={styles.button}>\n          {edit === true ? (\n            <button className={styles.submit_btn} onClick={UpdateData}>\n              수정하기\n            </button>\n          ) : (\n            <button className={styles.submit_btn} onClick={SaveData}>\n              저장하기\n            </button>\n          )}\n          <button className={styles.list_btn} onClick={MoveToList}>\n            목록으로\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Write;\n"]},"metadata":{},"sourceType":"module"}